receivers:
  jsonlogreceiver:
    protocols:
      http:
        endpoint: localhost:4318
    log_types:
      timestamp:
        - date
  prometheusremotewritereceiver:
    protocols:
      grpc:
        endpoint: localhost:4317
      http:
        endpoint: localhost:4318
        compression_algorithms: ["snappy"]
        max_request_body_size: 40971520
        cors:
          allowed_origins:
            - http://host.docker.internal
    metric_types:
      counter:
        - _counter
        - _sum
        - _total
        - _count
        - _bytes_ingress
        - _bytes_egress
      gauge:
      histogram:
      summary:
exporters:
  clickhouse:     
    endpoint: 'tcp://localhost:9000/default?dial_timeout=10s&compress=lz4&secure=false'
    database: 'default'
    #username: 'ci_migrations'
    #password: ''
    ttl: 0
    logs_table_name: 'otel_logs'
    traces_table_name: 'otel_traces_no_replica'
    metrics_table_name: 'otel_metrics'
    timeout: '5s'
    sending_queue:
      queue_size: 10000
      num_consumers: 20
    retry_on_failure:
      enabled: true
      initial_interval: '5s'
      max_interval: '90s'
      max_elapsed_time: '0'
  debug:
    verbosity:

processors:
  batch:
    send_batch_size: 10000
    timeout: 10s
extensions:
  file_storage/otc:
    directory: /Users/justinmason/repos/justinmason/otel-collector/storage
    timeout: 10s
  health_check:
    endpoint: 0.0.0.0:13133
service:
  extensions: ['file_storage/otc', 'health_check']
  pipelines:
    metrics:
      receivers:
        - prometheusremotewritereceiver
      processors:
        - batch
      exporters:
        - debug
        - clickhouse
  telemetry:
    metrics:
      address: '0.0.0.0:8888'
      level: 'normal'
